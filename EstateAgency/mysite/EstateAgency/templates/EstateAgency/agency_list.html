{% extends 'EstateAgency/base_agency.html' %}

{% block header %}

.immovables-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  grid-gap: 20px;
  margin-top: 20px;
  padding: 0;
  list-style-type: none;
}

.immovables-item {
  cursor: pointer;
  background-color: #f5f5f5; /* Light gray background */
  padding: 20px;
  text-align: center;
  border: 1px solid #e0e0e0; /* Light gray border */
  border-radius: 10px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.immovables-item:hover {
  transform: translateY(-5px); /* Slight lift on hover */
  box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.1); /* Subtle box shadow on hover */
}

.immovables-image {
  width: 150px;
  height: 150px;
  background-color: #ccc; /* Gray placeholder for the image */
  margin: 0 auto 10px;
  border-radius: 50%; /* Circular shape for the image container */
  overflow: hidden; /* Hide image overflow */
}

.immovables-text {
  font-size: 18px;
  line-height: 1.4;
  margin-bottom: 10px;
  font-weight: bold;
  color: #333; /* Dark gray text */
}


{% endblock %}

{% block content %}

{% if user.is_authenticated and not user.is_superuser %}
<div style="float: right;">
    <button class="button1"
            onclick="window.location.href = '{% url 'profile_user:profile' %}'">Profile
    </button>
</div>
{% endif %}

{% if user.is_superuser %}
<div style="float: right;">
    <button class="button1"
            onclick="window.location.href = '{% url 'EstateAgency:agency_analyse' %}'">Analyse
    </button>
    <button class="button1"
            onclick="window.location.href = '{% url 'EstateAgency:immovables_create' %}'">Add
    </button>
</div>
{%endif%}

<div class="sort-buttons">
    {% if is_sort_by_price %}
    <button class="button1" onclick="window.location.href = '{% url 'EstateAgency:agency_list' choose_category%}'">Sort
        by
        Price
    </button>
    {% else %}
    <button class="button1"
            onclick="window.location.href = '{% url 'EstateAgency:agency_list_sort_by_price' choose_category%}'">
        Sort by Price
    </button>
    {% endif %}

    <select class="button1" id="categorySelector" onchange="redirectToSelectedCategory()"
            onselect=choose_category>
        <option value="{% url 'EstateAgency:agency_list' 0 %}">All</option>
        {% for category in categories %}
        <option value="{% url 'EstateAgency:agency_list' category.id %}"
                {% if category.id == choose_category %}
                selected
                {% endif %}>
            {{ category.name }}
        </option>
        {% endfor %}
    </select>
    <script>
    function redirectToSelectedCategory() {
        var selectedOption = document.getElementById("categorySelector").value;
        window.location.href = selectedOption;
    }
    </script>

</div>
{% if user.is_authenticated or user.is_superuser %}
<label>Quote: {{timezone_context.quote}}</label><br>
<label>Joke: {{timezone_context.joke}}</label>
{%endif%}
<ul class="immovables-list">
    {% for m in immovables %}

    <li class="immovables-item" onclick="window.location.href='{% url 'EstateAgency:immovables_id' m.id %}'">
        {% load static %}
        <img src="/{{ m.photo }}"
             alt="image" class="immovables-image">
        <div class="immovables-text">{{ m }}</div>
        <div class="immovables-text">Capacity: {{ m.capacity }}</div>
        <div class="immovables-text">Price: {{ m.price }}</div>
        {% if user.is_superuser%}
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="immovables_id" value="{{ m.id }}">
            <button name="button1" class="button1">
                Delete
            </button>
        </form>
        {%endif%}
    </li>
    {% empty %}
    <li>No immovables</li>
    {% endfor %}
</ul>
<header>
    <div class="immovables-text"><br>
        {{ timezone_context.calendar|safe }}<br>
        <label>User Timezone: {{ timezone_context.user_timezone }} |</label>
        <label>Current Date: {{ timezone_context.current_date|date:"d/m/Y" }} </label>
    </div>
</header>

{% endblock %}